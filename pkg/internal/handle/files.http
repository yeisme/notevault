@fileurl=http://localhost:8080/api/v1/files

### 生成预签名 POST URL (带策略) JSON

POST {{fileurl}}/upload/urls/policy
Content-Type: application/json
X-User: test-user@example.com

{
  "files": [
    {
      "file_name": "example1.txt",
      "content_type": "text/plain",
      "max_size": 1048576,
      "min_size": 1
    },
    {
      "file_name": "example2.jpg",
      "content_type": "image/jpeg",
      "max_size": 5242880,
      "user_metadata": {
        "category": "image",
        "description": "Sample image"
      }
    }
  ]
}

### 生成预签名 POST URL (带策略) YAML

POST {{fileurl}}/upload/urls/policy
Content-Type: application/yaml
X-User: test-user@example.com

files:
  - file_name: example1.txt
    content_type: text/plain
    max_size: 1048576
    min_size: 1
  - file_name: example2.jpg
    content_type: image/jpeg
    max_size: 5242880
    user_metadata:
      category: image
      description: Sample image

### 生成预签名 PUT URL (不带策略) JSON

POST {{fileurl}}/upload/urls
Content-Type: application/json
X-User: test-user@example.com

{
  "files": [
    {
      "file_name": "example1.txt",
      "content_type": "text/plain"
    },
    {
      "file_name": "example2.jpg",
      "content_type": "image/jpeg"
    }
  ]
}

### 获取文件访问 URL JSON

POST {{fileurl}}/download/url
Content-Type: application/json

{
  "objects": [
    {
      "object_key": "test-user@example.com/2023/10/uuid_example1.txt"
    },
    {
      "object_key": "test-user@example.com/2023/10/uuid_example2.jpg"
    }
  ],
  "expiry_seconds": 3600
}

### 获取文件访问 URL (带响应头控制) JSON

POST {{fileurl}}/download/url
Content-Type: application/json

{
  "objects": [
    {
      "object_key": "test-user@example.com/2023/10/uuid_example1.txt",
      "response_content_type": "text/plain",
      "response_content_disposition": "attachment; filename=\"example1.txt\""
    }
  ],
  "expiry_seconds": 1800
}

### 上传单个小文件 (基本)

POST {{fileurl}}/upload/single
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
X-User: test-user@example.com

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="example.txt"
Content-Type: text/plain

This is a test file content for upload testing.

------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 上传单个小文件 (带元数据)

POST {{fileurl}}/upload/single
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
X-User: test-user@example.com

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="example.txt"
Content-Type: text/plain

This is a test file with metadata.

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file_name"

custom_filename.txt
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="tags"

{"category":"document","type":"test"}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="description"

Test file with custom metadata
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="content_type"

text/plain
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="category"

test
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="is_public"

true
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 批量上传小文件 (基本)

POST {{fileurl}}/upload/batch
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
X-User: test-user@example.com

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="files"; filename="file1.txt"
Content-Type: text/plain

Content of file 1.

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="files"; filename="file2.txt"
Content-Type: text/plain

Content of file 2.

------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 批量上传小文件 (带元数据)

POST {{fileurl}}/upload/batch
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
X-User: test-user@example.com

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="files"; filename="file1.txt"
Content-Type: text/plain

Content of file 1 with metadata.

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="files"; filename="file2.jpg"
Content-Type: image/jpeg

Fake JPEG content for testing.

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="metadata"

[
  {
    "file_name": "custom_file1.txt",
    "tags": {"type": "document", "priority": "high"},
    "description": "First file with metadata",
    "content_type": "text/plain",
    "category": "test",
    "is_public": true
  },
  {
    "file_name": "custom_file2.jpg",
    "tags": {"type": "image", "format": "jpeg"},
    "description": "Second file with metadata",
    "content_type": "image/jpeg",
    "category": "media",
    "is_public": false
  }
]
------WebKitFormBoundary7MA4YWxkTrZu0gW--
